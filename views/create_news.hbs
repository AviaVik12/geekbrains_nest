<h1>Sozdanije novosti</h1>

<form method="post" action="/news/api" enctype="multipart/form-data">
  <div class="mb-3">
		<label for="titleInput" class="form-label">Zagolovok</label>
		<input class="form-control" name="title" id="titleInput">
	</div>

  <div class="mb-3">
		<label for="descriptionInput" class="form-label">Opisanije</label>
		<input class="form-control" name="description" id="descriptionInput">
	</div>

  <div class="mb-3">
		<label for="authorInput" class="form-label">Avtor</label>
		<input class="form-control" name="author" id="authorInput">
	</div>

  <div class="form-group">
		<label for="cover">Oblo∆∂ka novosti</label>
		<input type="file" class="form-control-file" name="cover" id="cover">
	</div>

	{{!-- <input type="submit" value="Sozdatj"> --}}

	<button type="button" class="btn btn-primary" onclick="sendForm()">
		Sozdatj
	</button>
</form>

<script>
	Date.prototype.toDateInputValue = (function() {
		var local = new Date(this);
		local.setMinutes(this.getMinutes() - this.getTimezoneOffset());
		return local.toJSON().slice(0, 10);
	});

	document.getElementById('dateInput').value = new Date().toDateInputValue();

	function sendForm() {
		var data = new FormData($('form')[0]);

		$.ajax({
			url: '/news/api', 
			data: data, 
			cache: false, 
			contentType: false, 
			processData: false, 
			method: 'POST', 
			success: function() {
				alert('Novostj sozdana');
				window.location.href = '/news/all';
			}
		});
	}
</script>
